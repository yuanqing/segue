"use strict";var slice=[].slice;var segue=function(e,r){if(typeof e!=="function"){throw new Error("cb must be a function")}var t=r&&r.repeat===true;var u=[];var n=[];var a=0;var i=false;var s=false;var f=function(r){var c=u.length;if(t){a=a%c}if(r||a===c){i=false;s=r;return e(r)}u[a].apply(null,[].concat(f,n[a++]))};return function c(r){if(s){return e(s)}u.push(r);n.push(slice.call(arguments,1));if(!i){i=true;setTimeout(function(){f()},0)}return c}};module.exports=segue;